From 12931fe1e7f5fedcc3ae1a9edd981e3638110bc1 Mon Sep 17 00:00:00 2001
From: Peter Fitger <peter.fitger@flir.se>
Date: Wed, 20 Mar 2019 15:57:24 +0100
Subject: [PATCH] DT: Add touchpad leds

---
 arch/arm/boot/dts/imx7ulp-ec201.dtsi | 31 ++++++++++++++++++++++++++++++-
 1 file changed, 30 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/imx7ulp-ec201.dtsi b/arch/arm/boot/dts/imx7ulp-ec201.dtsi
index 447cd39..900eb16 100644
--- a/arch/arm/boot/dts/imx7ulp-ec201.dtsi
+++ b/arch/arm/boot/dts/imx7ulp-ec201.dtsi
@@ -191,6 +191,7 @@
 			IMX7ULP_PAD_PTC8__LPI2C6_SCL    0x27
 			IMX7ULP_PAD_PTC9__LPI2C6_SDA    0x27
 			IMX7ULP_PAD_PTC10__PTC10        0x2 /* ACC_INT_n */
+			IMX7ULP_PAD_PTC11__PTC11        0x3 /* TP_LED_EN */
 			IMX7ULP_PAD_PTC15__PTC15  	0x3 /* TORCH */
 			IMX7ULP_PAD_PTC16__PTC16  	0x3 /* STROBE */
 			>;
@@ -418,7 +419,7 @@
 		compatible = "leds-lm3642";
 		reg = <0x63>;
 		
-		flash-ramp = <3>;       /* 010b = 2 ms */
+		flash-ramp = <3>;       /* 011b = 2 ms */
 		flash-time-out = <7>;   /* 111b = 800 ms */ 
 		torch-max-current = <3>;/* 011b = 375 mA */
 		flash-max-current = <7>;/* 0111b = 750 mA */
@@ -427,6 +428,34 @@
 		torch-gpios = <&gpio_ptc 15 GPIO_ACTIVE_HIGH>;
 		strobe-gpios = <&gpio_ptc 16 GPIO_ACTIVE_HIGH>;
 	};
+	
+	touchpad_leds: toucpad_leds@32 {
+		compatible = "national,lp5521";
+		reg = <0x32>;
+		
+		label = "touchpad-leds";
+		clock-mode = <1>;	/* Internal clock */
+		enable-gpio = <&gpio_ptc 11 GPIO_ACTIVE_HIGH>;
+
+		tp_led1 {
+			chan-name = "tp-led1";
+			led-cur = /bits/ 8 <0x32>;
+			max-cur = /bits/ 8 <0x32>;
+			linux,default-trigger = "none";
+		};
+		tp_led2 {
+			chan-name = "tp-led2";
+			led-cur = /bits/ 8 <0x32>;
+			max-cur = /bits/ 8 <0x32>;
+			linux,default-trigger = "none";
+		};
+		tp_led3 {
+			chan-name = "tp-led3";
+			led-cur = /bits/ 8 <0x32>;
+			max-cur = /bits/ 8 <0x32>;
+			linux,default-trigger = "none";
+		};
+	};
 };
 
 /* Touch screen */
-- 
1.9.1

