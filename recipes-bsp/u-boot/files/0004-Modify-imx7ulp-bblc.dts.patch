From 000d19eeaea3b05bf93f0479be123fdfcac9e053 Mon Sep 17 00:00:00 2001
From: David Sernelius <david.sernelius@flir.se>
Date: Mon, 14 Jan 2019 18:22:40 +0100
Subject: [PATCH] Modify imx7ulp-bblc.dts

Signed-off-by: David Sernelius <david.sernelius@flir.se>
---
 arch/arm/dts/imx7ulp-bblc.dts | 292 ++++++++++++++++------------------
 1 file changed, 141 insertions(+), 151 deletions(-)

diff --git a/arch/arm/dts/imx7ulp-bblc.dts b/arch/arm/dts/imx7ulp-bblc.dts
index 54fcfad358..53761704ce 100644
--- a/arch/arm/dts/imx7ulp-bblc.dts
+++ b/arch/arm/dts/imx7ulp-bblc.dts
@@ -10,186 +10,176 @@
 
 #include "imx7ulp.dtsi"
 
-
 / {
-	model = "FLIR Low Cost Brassboard";
-	compatible = "flir,imx7ulp-bblc", "fsl,imx7ulp", "Generic DT based system";
-
-	chosen {
-		stdout-path = &lpuart4;
-	};
-
-	memory {
-		device_type = "memory";
-		reg = <0x60000000 0x20000000>;
-	};
-
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		
-	};
-
-
+    model = "FLIR Low Cost Brassboard";
+    compatible = "flir,imx7ulp-bblc", "fsl,imx7ulp", "Generic DT based system";
+
+    chosen {
+        stdout-path = &lpuart4;
+    };
+
+    memory {
+        device_type = "memory";
+        reg = <0x60000000 0x20000000>;
+    };
+
+    regulators {
+        compatible = "simple-bus";
+        #address-cells = <1>;
+        #size-cells = <0>;
+    };
 };
 
-
 &iomuxc1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_hog_1>;
-
-	imx7ulp-evk {
-		pinctrl_hog_1: hoggrp-1 {
-			fsl,pins = <
-				ULP1_PAD_PTC1__PTC1	 0x30100	 //SHUTTER_OUT
-			>;
-		};
-
-		pinctrl_lpi2c5: lpi2c5grp {
-			fsl,pins = <
-				ULP1_PAD_PTC4__LPI2C5_SCL       0x27
-				ULP1_PAD_PTC5__LPI2C5_SDA       0x27
-			>;
-		};
-		
-		pinctrl_lpi2c6: lpi2c6grp {
-			fsl,pins = <
-				ULP1_PAD_PTE8__LPI2C6_SCL	0x27
-				ULP1_PAD_PTE9__LPI2C6_SDA	0x27
-			>;
-		};
-		
-		pinctrl_lpi2c7: lpi2c7grp {
-			fsl,pins = <
-				ULP1_PAD_PTE12__LPI2C7_SCL	0x27
-				ULP1_PAD_PTF13__LPI2C7_SDA	0x27
-			>;
-		};
-		
-		pinctrl_lpuart4: lpuart4grp {
-			fsl,pins = <
-				ULP1_PAD_PTC3__LPUART4_RX	0x3
-				ULP1_PAD_PTC2__LPUART4_TX	0x3
-			>;
-		};
-
-		pinctrl_lpuart6: lpuart6grp {
-			fsl,pins = <
-				ULP1_PAD_PTE10__LPUART6_TX	0x3
-				ULP1_PAD_PTE11__LPUART6_RX	0x3
-				ULP1_PAD_PTE9__LPUART6_RTS_B	0x3
-				ULP1_PAD_PTE8__LPUART6_CTS_B	0x3
-			>;
-		};
-
-		pinctrl_usdhc0: usdhc0grp {
-			fsl,pins = <
-				ULP1_PAD_PTD0__PTD0		0x20000		/* USDHC0 RST */
-				ULP1_PAD_PTD1__SDHC0_CMD	0x43
-				ULP1_PAD_PTD2__SDHC0_CLK	0x10042
-				ULP1_PAD_PTD3__SDHC0_D7	0x43
-				ULP1_PAD_PTD4__SDHC0_D6	0x43
-				ULP1_PAD_PTD5__SDHC0_D5	0x43
-				ULP1_PAD_PTD6__SDHC0_D4	0x43
-				ULP1_PAD_PTD7__SDHC0_D3	0x43
-				ULP1_PAD_PTD8__SDHC0_D2	0x43
-				ULP1_PAD_PTD9__SDHC0_D1	0x43
-				ULP1_PAD_PTD10__SDHC0_D0	0x43
-				ULP1_PAD_PTD11__SDHC0_DQS	0x42
-			>;
-		};
-
-		pinctrl_usdhc1: usdhc1grp {
-			fsl,pins = <
-				ULP1_PAD_PTE3__SDHC1_CMD		0x43
-				ULP1_PAD_PTE2__SDHC1_CLK		0x10042
-				ULP1_PAD_PTE1__SDHC1_D0		0x43
-				ULP1_PAD_PTE0__SDHC1_D1		0x43
-				ULP1_PAD_PTE5__SDHC1_D2		0x43
-				ULP1_PAD_PTE4__SDHC1_D3		0x43
-			>;
-		};
-
-	};
+    pinctrl-names = "default";
+    pinctrl-0 = <&pinctrl_hog_1>;
+
+    pinctrl_hog_1: hoggrp-1 {
+        fsl,pins = <
+            ULP1_PAD_PTC0__PTC0 0x30100  //SHUTTER_IN
+            ULP1_PAD_PTC1__PTC1 0x30100  //SHUTTER_OUT
+        >;
+    };
+
+    pinctrl_usdhc0: usdhc0grp {
+        fsl,pins = <
+            ULP1_PAD_PTD0__PTD0         0x20000     /* USDHC0 RST */
+            ULP1_PAD_PTD1__SDHC0_CMD    0x43
+            ULP1_PAD_PTD2__SDHC0_CLK    0x10042
+            ULP1_PAD_PTD3__SDHC0_D7     0x43
+            ULP1_PAD_PTD4__SDHC0_D6     0x43
+            ULP1_PAD_PTD5__SDHC0_D5     0x43
+            ULP1_PAD_PTD6__SDHC0_D4     0x43
+            ULP1_PAD_PTD7__SDHC0_D3     0x43
+            ULP1_PAD_PTD8__SDHC0_D2     0x43
+            ULP1_PAD_PTD9__SDHC0_D1     0x43
+            ULP1_PAD_PTD10__SDHC0_D0    0x43
+            ULP1_PAD_PTD11__SDHC0_DQS   0x42
+        >;
+    };
+
+    pinctrl_usdhc1: usdhc1grp {
+        fsl,pins = <
+            ULP1_PAD_PTE3__SDHC1_CMD    0x43
+            ULP1_PAD_PTE2__SDHC1_CLK    0x10042
+            ULP1_PAD_PTE1__SDHC1_D0     0x43
+            ULP1_PAD_PTE0__SDHC1_D1     0x43
+            ULP1_PAD_PTE5__SDHC1_D2     0x43
+            ULP1_PAD_PTE4__SDHC1_D3     0x43
+        >;
+    };
+
+    pinctrl_lpi2c5: lpi2c5grp {
+        fsl,pins = <
+            ULP1_PAD_PTC4__LPI2C5_SCL   0x27
+            ULP1_PAD_PTC5__LPI2C5_SDA   0x27
+        >;
+    };
+
+    pinctrl_lpi2c6: lpi2c6grp {
+        fsl,pins = <
+            ULP1_PAD_PTE8__LPI2C6_SCL   0x27
+            ULP1_PAD_PTE9__LPI2C6_SDA   0x27
+        >;
+    };
+
+    pinctrl_lpi2c7: lpi2c7grp {
+        fsl,pins = <
+            ULP1_PAD_PTE12__LPI2C7_SCL  0x27
+            ULP1_PAD_PTF13__LPI2C7_SDA  0x27
+        >;
+    };
+
+    pinctrl_lpuart4: lpuart4grp {
+        fsl,pins = <
+            ULP1_PAD_PTC3__LPUART4_RX   0x3
+            ULP1_PAD_PTC2__LPUART4_TX   0x3
+        >;
+    };
+
+    pinctrl_lpuart6: lpuart6grp {
+        fsl,pins = <
+            ULP1_PAD_PTC10__LPUART6_TX      0x3
+            ULP1_PAD_PTC11__LPUART6_RX      0x3
+            ULP1_PAD_PTC9__LPUART6_RTS_B    0x3
+            ULP1_PAD_PTC8__LPUART6_CTS_B    0x3
+        >;
+    };
 };
 
 /* Touch screen */
 &lpi2c7 {
-	#address-cells = <1>;
-	#size-cells = <0>;
-	pinctrl-names = "default",  "sleep";
-	pinctrl-0 = <&pinctrl_lpi2c7>;
-	pinctrl-1 = <&pinctrl_lpi2c7>;
-	status = "okay";
+    #address-cells = <1>;
+    #size-cells = <0>;
+    pinctrl-names = "default",  "sleep";
+    pinctrl-0 = <&pinctrl_lpi2c7>;
+    pinctrl-1 = <&pinctrl_lpi2c7>;
+    status = "okay";
 
 };
-	
-/*  IO expander for keyboard, VCAM, Lepton, Temp sensor 1 and 2, EEPROM	*/
+
+/*  IO expander for keyboard, VCAM, Lepton, Temp sensor 1 and 2, EEPROM */
 &lpi2c6 {
-#address-cells = <1>;
-#size-cells = <0>;
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&pinctrl_lpi2c6>;
-	pinctrl-1 = <&pinctrl_lpi2c6>;
-	status = "okay";
-	
+    #address-cells = <1>;
+    #size-cells = <0>;
+    pinctrl-names = "default", "sleep";
+    pinctrl-0 = <&pinctrl_lpi2c6>;
+    pinctrl-1 = <&pinctrl_lpi2c6>;
+    status = "okay";
+
 };
-	
+
 /*  PMIC */
 &lpi2c5 {
-	#address-cells = <1>;
-	#size-cells = <0>;
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&pinctrl_lpi2c5>;
-	pinctrl-1 = <&pinctrl_lpi2c5>;
-	status = "okay";
+    #address-cells = <1>;
+    #size-cells = <0>;
+    pinctrl-names = "default", "sleep";
+    pinctrl-0 = <&pinctrl_lpi2c5>;
+    pinctrl-1 = <&pinctrl_lpi2c5>;
+    status = "okay";
 };
 
-
-
 &lpuart4 { /* console */
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&pinctrl_lpuart4>;
-	pinctrl-1 = <&pinctrl_lpuart4>;
-	status = "okay";
+    pinctrl-names = "default", "sleep";
+    pinctrl-0 = <&pinctrl_lpuart4>;
+    pinctrl-1 = <&pinctrl_lpuart4>;
+    status = "okay";
 };
 
 &lpuart6 { /* BT */
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&pinctrl_lpuart6>;
-	pinctrl-1 = <&pinctrl_lpuart6>;
-	status = "okay";
+    pinctrl-names = "default", "sleep";
+    pinctrl-0 = <&pinctrl_lpuart6>;
+    pinctrl-1 = <&pinctrl_lpuart6>;
+    status = "okay";
 };
 
-
-
 &usbotg1 {
-	srp-disable;
-	hnp-disable;
-	adp-disable;
-	status = "okay";
+    dr_mode = "peripheral";
+    srp-disable;
+    hnp-disable;
+    adp-disable;
+    status = "okay";
 };
 
 /* emmc */
 &usdhc0 {
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&pinctrl_usdhc1>;
-	pinctrl-1 = <&pinctrl_usdhc1>;
-	bus-width = <8>;
-	no-1-8-v;
-	pm-ignore-notify;
-	keep-power-in-suspend;
-	non-removable;
-	status = "okay";
+    pinctrl-names = "default", "sleep";
+    pinctrl-0 = <&pinctrl_usdhc0>;
+    pinctrl-1 = <&pinctrl_usdhc0>;
+    bus-width = <8>;
+    non-removable;
+    status = "okay";
 };
 
 /* wifi */
 &usdhc1 {
-	pinctrl-names = "default", "sleep";
-	pinctrl-0 = <&pinctrl_usdhc0>;
-	pinctrl-1 = <&pinctrl_usdhc0>;
-	non-removable;
-	status = "okay";
+    pinctrl-names = "default", "sleep";
+    pinctrl-0 = <&pinctrl_usdhc1>;
+    pinctrl-1 = <&pinctrl_usdhc1>;
+    no-1-8-v;
+    bus-width = <4>;
+    pm-ignore-notify;
+    keep-power-in-suspend;
+    non-removable;
+    status = "okay";
 };
-- 
2.17.1

